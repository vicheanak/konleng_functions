[debug] [2018-12-12T06:51:34.441Z] ----------------------------------------------------------------------
[debug] [2018-12-12T06:51:34.443Z] Command:       /usr/local/bin/node /Users/den/.npm-global/bin/firebase deploy
[debug] [2018-12-12T06:51:34.443Z] CLI Version:   6.1.2
[debug] [2018-12-12T06:51:34.443Z] Platform:      darwin
[debug] [2018-12-12T06:51:34.443Z] Node Version:  v8.12.0
[debug] [2018-12-12T06:51:34.444Z] Time:          Wed Dec 12 2018 13:51:34 GMT+0700 (+07)
[debug] [2018-12-12T06:51:34.444Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-12-12T06:51:34.458Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-12-12T06:51:34.459Z] > authorizing via signed-in user
[debug] [2018-12-12T06:51:34.459Z] [iam] checking project konleng-cloud for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]
[debug] [2018-12-12T06:51:34.461Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/konleng-cloud:testIamPermissions  

[debug] [2018-12-12T06:51:36.360Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:51:36.361Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/konleng-cloud  
 
[debug] [2018-12-12T06:51:37.131Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'konleng-cloud'...
[info] 
[info] i  deploying storage, firestore, functions, hosting
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-12-12T06:51:45.613Z] >>> HTTP REQUEST GET https://appengine.googleapis.com/v1/apps/konleng-cloud  
 
[debug] [2018-12-12T06:51:47.614Z] <<< HTTP RESPONSE 200
[info] i  storage: checking storage.rules for compilation errors...
[debug] [2018-12-12T06:51:47.618Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/konleng-cloud:test  

[debug] [2018-12-12T06:51:49.354Z] <<< HTTP RESPONSE 200
[info] ✔  storage: rules file storage.rules compiled successfully
[info] i  firestore: checking firestore.rules for compilation errors...
[debug] [2018-12-12T06:51:49.365Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/konleng-cloud:test  

[debug] [2018-12-12T06:51:51.114Z] <<< HTTP RESPONSE 200
[info] ✔  firestore: rules file firestore.rules compiled successfully
[debug] [2018-12-12T06:51:51.120Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "concurrently --kill-others \"tsc -w\" \"firebase serve --only functions\"",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "index.js",
  "dependencies": {
    "@google-cloud/storage": "^2.3.1",
    "@google/maps": "^0.5.5",
    "@types/algoliasearch": "^3.30.1",
    "@types/async": "^2.0.50",
    "@types/body-parser": "^1.17.0",
    "@types/cors": "^2.8.4",
    "@types/dotenv": "^6.1.0",
    "@types/express": "^4.16.0",
    "@types/google-cloud__storage": "^1.7.2",
    "@types/sharp": "^0.21.0",
    "algoliasearch": "^3.31.0",
    "async": "^2.6.1",
    "base64-stream": "^1.0.0",
    "body-parser": "^1.18.3",
    "child-process-promise": "^2.2.1",
    "cors": "^2.8.5",
    "dotenv": "^6.2.0",
    "express": "^4.16.4",
    "firebase": "^5.7.0",
    "firebase-admin": "~6.0.0",
    "firebase-functions": "^2.1.0",
    "firebase-functions-helper": "^0.6.0",
    "google-maps-api-typings": "^1.0.5",
    "http": "0.0.0",
    "mimetypes": "^0.1.1",
    "mkdirp-promise": "^5.0.1",
    "request": "^2.88.0",
    "sharp": "^0.21.1",
    "tslint": "^5.11.0",
    "uuid": "^3.3.2"
  },
  "devDependencies": {
    "concurrently": "4.1.0",
    "typescript": "3.2.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-12-12T06:51:51.121Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/konleng-cloud?view=CONSUMER_VIEW  
 
[debug] [2018-12-12T06:51:51.121Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/konleng-cloud?view=CONSUMER_VIEW  
 
[debug] [2018-12-12T06:51:53.656Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:51:53.781Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-12-12T06:51:53.782Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/konleng-cloud  
 
[debug] [2018-12-12T06:51:55.607Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:51:55.608Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/376338125222:getServerAppConfig  
 
[debug] [2018-12-12T06:51:56.593Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:51:56.595Z] >>> HTTP REQUEST POST https://firebasehosting.googleapis.com/v1beta1/sites/konleng-cloud/versions  

[debug] [2018-12-12T06:51:58.672Z] <<< HTTP RESPONSE 200
[info] i  storage: uploading rules storage.rules...
[debug] [2018-12-12T06:51:58.674Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/konleng-cloud/rulesets  

[debug] [2018-12-12T06:52:00.414Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:00.414Z] [rules] created ruleset projects/konleng-cloud/rulesets/911f4ede-38b0-4b69-8547-1f1dfdc5d55e
[info] i  firestore: uploading rules firestore.rules...
[debug] [2018-12-12T06:52:00.415Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/konleng-cloud/rulesets  

[debug] [2018-12-12T06:52:00.416Z] >>> HTTP REQUEST GET https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  
 
[debug] [2018-12-12T06:52:01.950Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:01.951Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"title","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:01.951Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:02.104Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:02.105Z] [rules] created ruleset projects/konleng-cloud/rulesets/1ddea0f0-c0d8-409b-a436-a7a25e0c3bbd
[debug] [2018-12-12T06:52:03.701Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:03.702Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"district","mode":"ASCENDING"},{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"title","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:03.702Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:05.123Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:05.124Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"status","mode":"ASCENDING"},{"fieldPath":"created_date","mode":"DESCENDING"}]}
[debug] [2018-12-12T06:52:05.124Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:06.669Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:06.669Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"status","mode":"ASCENDING"},{"fieldPath":"created_date","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:06.670Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:07.991Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:07.991Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"status","mode":"ASCENDING"},{"fieldPath":"price","mode":"DESCENDING"}]}
[debug] [2018-12-12T06:52:07.992Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:09.629Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:09.630Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"district","mode":"ASCENDING"},{"fieldPath":"listing_type","mode":"ASCENDING"},{"fieldPath":"property_type","mode":"ASCENDING"},{"fieldPath":"created_date","mode":"DESCENDING"}]}
[debug] [2018-12-12T06:52:09.630Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:11.268Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:11.268Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"status","mode":"ASCENDING"},{"fieldPath":"price","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:11.268Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:13.011Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:13.011Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"district","mode":"ASCENDING"},{"fieldPath":"listing_type","mode":"ASCENDING"},{"fieldPath":"property_type","mode":"ASCENDING"},{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"title","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:13.012Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:14.442Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:14.443Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"listing_type","mode":"ASCENDING"},{"fieldPath":"property_type","mode":"ASCENDING"},{"fieldPath":"created_date","mode":"DESCENDING"}]}
[debug] [2018-12-12T06:52:14.443Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:15.774Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:15.774Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"listing_type","mode":"ASCENDING"},{"fieldPath":"created_date","mode":"DESCENDING"}]}
[debug] [2018-12-12T06:52:15.775Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:17.412Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:17.412Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"district","mode":"ASCENDING"},{"fieldPath":"property_type","mode":"ASCENDING"},{"fieldPath":"province","mode":"ASCENDING"},{"fieldPath":"title","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:17.412Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:19.036Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:19.036Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"district","mode":"ASCENDING"},{"fieldPath":"listing_type","mode":"ASCENDING"},{"fieldPath":"property_type","mode":"ASCENDING"},{"fieldPath":"price","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:19.036Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:20.820Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:20.820Z] Creating new index: {"collectionId":"listings","state":"READY","fields":[{"fieldPath":"status","mode":"ASCENDING"},{"fieldPath":"title","mode":"ASCENDING"}]}
[debug] [2018-12-12T06:52:20.821Z] >>> HTTP REQUEST POST https://firestore.googleapis.com/v1beta1/projects/konleng-cloud/databases/(default)/indexes  

[debug] [2018-12-12T06:52:22.122Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-12-12T06:52:22.125Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs  
 
[debug] [2018-12-12T06:52:22.724Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:22.725Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs/algolia/variables  
 
[debug] [2018-12-12T06:52:22.725Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs/google/variables  
 
[debug] [2018-12-12T06:52:23.249Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:23.250Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs/algolia/variables/api_key  
 
[debug] [2018-12-12T06:52:23.250Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs/algolia/variables/app_id  
 
[debug] [2018-12-12T06:52:23.251Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs/algolia/variables/search_key  
 
[debug] [2018-12-12T06:52:23.251Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs/algolia/variables/admin_key  
 
[debug] [2018-12-12T06:52:23.316Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:23.316Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/konleng-cloud/configs/google/variables/api_key  
 
[debug] [2018-12-12T06:52:23.779Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:23.780Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:23.785Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:23.787Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:52:23.845Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (86.83 KB) for uploading
[debug] [2018-12-12T06:52:25.120Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/konleng-cloud/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2018-12-12T06:53:02.423Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:53:02.424Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-0f9f971c-bd83-4e71-a808-cb3df55de7bd/f18d74c3-54a7-48bb-aa8f-53e27833b8e7.zip?GoogleAccessId=service-376338125222@gcf-admin-robot.iam.gserviceaccount.com&Expires=1544599308&Signature=Wnu5qYFXxvnwnbRQTuCTlX1zshbYaYAGt%2BJlKpPXu%2F%2BvD88Ewb4Q4KPnq3tqix4STPbbM9qSTGz8mixHdStdSSUm64NWVBIfFdKACj2%2FhDyTFqVJfhSQR%2BiILqZ3iBUah27lQeDeg5%2B2eA9B4eaDWfPZkSKuu67WRmVTef9TUUH5P0s5viIPLkOQ2VXk1VvgTJaNLxywbypoad0khWDF2eo2p43fMr2Xo%2BK5moBfA7FcUqscDe%2FkIg%2BM9dBHQMfiDL5wiVHYNIlZeEeQ13ZP6dKcgjTPohXOUzrCWujnC0ltVqWwnanzA8ElBHGefC9dxtLhPTGykDm%2BymrKg8E24Q%3D%3D  

[debug] [2018-12-12T06:53:04.929Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[info] i  hosting[konleng-cloud]: beginning deploy...
[info] i  hosting[konleng-cloud]: found 214 files in public
[debug] [2018-12-12T06:53:04.987Z] [hosting] hash cache [cHVibGlj] not populated
[debug] [2018-12-12T06:53:06.097Z] [hosting] hash cache [cHVibGlj] stored for 214 files
[debug] [2018-12-12T06:53:06.097Z] [hosting][hash queue][FINAL]
[debug] [2018-12-12T06:53:06.097Z] >>> HTTP REQUEST POST https://firebasehosting.googleapis.com/v1beta1/sites/konleng-cloud/versions/e2fc5765eb4c0a8b:populateFiles  
 <request body omitted>
[debug] [2018-12-12T06:53:22.672Z] <<< HTTP RESPONSE 200
[debug] [2018-12-12T06:53:22.747Z] [hosting][populate queue][FINAL]
[debug] [2018-12-12T06:53:22.748Z] [hosting] uploads queued: 214
[debug] [2018-12-12T06:53:25.765Z] [hosting][upload]
